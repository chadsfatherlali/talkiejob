<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel='import' href='../../bower_components/paper-input/paper-input.html'/>
<link rel='import' href='../../bower_components/paper-button/paper-button.html'/>
<link rel='import' href='../../bower_components/paper-dialog/paper-dialog.html'/>
<link rel='import' href='../../bower_components/iron-form/iron-form.html'/>

<dom-module id="talkijob-adduser">
    <template>
        <style>
            :host {
                display: block;
                --paper-input-container-focus-color: #1ea58a;
            }

            .container {
                background-color: #fff;
                width: 400px;
                margin: 30px auto;
                padding: 25px;
                border-radius: 4px;
                border-bottom: 3px solid #ddd;
            }
            paper-button {
                width: 250px;
                height: 60px;
                background-color: rgba(232, 91, 101, 0.9);
                color: #fff;
                font-weight: bold;
                font-family: 'Montserrat', sans-serif;
                transition: background-color 0.3s linear;
                margin:20px auto;
            }

            .tk__button:hover {
                background-color: rgba(232, 91, 101, 1);
            }

            .center {
                text-align: center;
            }

            .padding {
                padding: 20px;
            }

            h2 {
                font-size: 2em;
                color: #708090;
                text-align: center;
                font-weight: bold;
                padding-bottom: 5px;
            }

            h3 {
                font-size: 1.3em;
                color:#708090 ;
                text-align: center;
            }

            paper-dialog {
                width: 400px;
            }

            paper-dialog h2 {
                color: #13a489;
                font-size: 2.3em;
            }

            .tk__button {
                width: 250px;
                height: 60px;
                background-color: rgba(232, 91, 101, 0.9);
                color: #fff;
                font-weight: bold;
                font-family: 'Montserrat', sans-serif;
                transition: background-color 0.3s linear;
                margin-bottom: 0px;
            }

            .tk__button:hover {
                background-color: rgba(232, 91, 101, 1);
            }

            .center {
                text-align: center;
            }

            paper-dialog a {
                text-decoration: none;
            }


        </style>

        <div class="container">
            <h2>Registrate en takiejob</h2>

            <form is="iron-form" id="userRegistration">
                <paper-input class="pass" type="text" label="Nombre" id="name" name="name" required error-message="Este campo es obligatorio"></paper-input>
                <paper-input class="pass" type="text" label="Apellido" id="surname" name="surname" required error-message="Este campo es obligatorio"></paper-input>
                <paper-input type="email" label="Email" id="email" name="email" required error-message="Este campo es obligatorio"></paper-input>
                <paper-input type="password" label="Contraseña" id="password" name="password" required error-message="Este campo es obligatorio"></paper-input>
                <paper-input type="password" label="Repite la contraseña" name="passre" id="passre" required error-message="No coincide"></paper-input>
                <div class="center"><paper-button class="tk__button" on-tap="sendInfo" raised>Enviar</paper-button></div>
            </form>
        </div>

        <!--thanks modal-->
        <paper-dialog class="thanksmodal" id="thanksmodal" with-backdrop>
            <div class="padding">
              <h2>Muchas gracias!</h2>
              <h3>Solo le queda un paso más, le hemos enviado un correo con un enlace que tiene que verificar con un click </h3>
              <div class="center">
                <a href="../../index.html"> <paper-button class="tk__button" raised >Volver a la portada</paper-button></a>
              </div>
            </div>
        </paper-dialog>
        
        <iron-ajax id="xhr"
          url="http://localhost:3000/api/users"
          content-type="application/json"
          method="POST"
          handle-as="json"
          params={{datos}}></ajax>
    </template>

    <script>
        Polymer({
            is: 'talkijob-adduser',
            
            properties: {
              datos: {
                name: String,
                surname: String,
                password: String,
                email: String
              }
            },
            
            sendInfo: function () {
              this.datos = this.$.userRegistration.serialize();
              this.$.xhr.generateRequest();
            }
        });
    </script>
</dom-module>
